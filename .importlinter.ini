[importlinter]
# プロジェクトのルートパッケージ（＝ import 解析の起点）
root_package = app
include_external_packages = False

# レイヤー順序：gui -> services -> core
[contract:layers_gui_services_core]
name = GUI/Service/Core のレイヤー厳守
type = layers
layers =
    app.gui
    app.services
    app.core

# GUI → core への“直リンク”を禁止（必ず services 経由）
[contract:forbid_gui_to_core_direct]
name = GUI から core 直輸入の禁止
type = forbidden
source_modules =
    app.gui
forbidden_modules =
    app.core

# batch（存在する場合）→ gui 依存を禁止（バッチはUIに依らない）
[contract:batch_isolation]
name = batch は GUI に依存しない
type = forbidden
source_modules =
    app.batch
forbidden_modules =
    app.gui

# 重要：ルート直下の core/ へは依存させない（混線防止）
[contract:forbid_top_core]
name = app.* から ルート直下 core への依存を禁止
type = forbidden
source_modules =
    app
forbidden_modules =
    core
