[importlinter]
# v5.1 仕様の「3層構造（GUI / Services / Core）」をチェックする設定
# GUI層（app.gui）
# サービス層（app.services）
# コア層（app.core） 
root_package = app

;===========================================================
; Contract 1: GUI → Services → Core のレイヤ構造
;-----------------------------------------------------------
; 目的:
;   - app.services / app.core から app.gui を import させない
;   - app.core から app.services を import させない
;   - つまり「上位層が下位層を呼び出す一方向」に限定する
;===========================================================
[importlinter:contract:layered_architecture]
name = GUI -> Services -> Core layered architecture
type = layers

; この中のサブパッケージに対してレイヤールールを適用
containers =
    app

; 上から「上位レイヤ」→「下位レイヤ」の順
; 下位のレイヤは上位レイヤを import してはいけない
;   - services は gui を import してはいけない
;   - core は gui / services を import してはいけない
layers =
    gui
    services
    core

;===========================================================
; Contract 2: GUI から Core への直接アクセスを禁止
;-----------------------------------------------------------
; 仕様書 v5.1 より：
;   GUI → コアへの直接アクセス【禁止】 
;===========================================================
[importlinter:contract:forbid_gui_core]
name = GUI must not import Core directly
type = forbidden

; GUI 層からの import を監視
source_modules =
    app.gui

; GUI から直接 import してはいけないモジュール
forbidden_modules =
    app.core

;===========================================================
; Contract 3: Services から GUI への依存を禁止
;-----------------------------------------------------------
; 仕様書 v5.1 より：
;   サービス層が GUI を import【禁止】 
;   Core はサービスの存在を知らない【原則】（≒ Core -> Services も禁止）
;===========================================================
[importlinter:contract:forbid_services_gui]
name = Services must not depend on GUI
type = forbidden

source_modules =
    app.services

forbidden_modules =
    app.gui

;===========================================================
; Contract 4: Core から Services への依存も念のため明示禁止
; （Layer契約だけでもNGだが、読みやすさのためダブル指定）
;===========================================================
[importlinter:contract:forbid_core_services]
name = Core must not depend on Services
type = forbidden

source_modules =
    app.core

forbidden_modules =
    app.services
