# automation_policy.yaml
# ミチビキ 自動化レベル制御（T-45）
# 方針：守りは自動、攻めは段階解放。説明不能な自動化は禁止。

# -----------------------------
# 自動化レベル
# 0: 提案のみ
# 1: 守りのみ自動
# 2: 限定的に攻めを自動
# 3: FULL-AUTO（※初期は封印）
# -----------------------------
automation_level: 1
automation_level_max: 2 # L3は当面禁止

# 緊急停止スイッチ
kill_switch: false

# -----------------------------
# 永久に自動化しない項目
# -----------------------------
auto_adopt_new_strategy: false # 新戦略の自動採用は禁止
auto_apply_active_model: false # active_modelの自動切替禁止
auto_switch_symbol_timeframe: false # 通貨ペア/時間足の自動変更禁止

# -----------------------------
# 自動化対象のON/OFF
# -----------------------------
auto_exit_defense_enabled: true # 防御EXITは自動OK
auto_exit_profit_enabled: false # 利益最大化EXITは提案のみ
auto_size_up_enabled: true # サイズUPは条件付きで許可
auto_promote_enabled: false # PROMOTEの自動APPLYは禁止

# -----------------------------
# 攻め（サイズUP）上限制御
# -----------------------------
max_size_up_pct: 10.0 # 1回のサイズ増加は最大 +10%
max_consecutive_size_up: 2 # 連続サイズUP回数の上限
max_total_size_multiplier: 1.3 # 合計サイズ倍率の上限
cooldown_after_big_win_minutes: 60 # 大勝ち後のクールダウン時間

# -----------------------------
# 攻めを許可するための必須条件
# -----------------------------
require_stable_for_offense: true # stability.stable == true が必須
require_min_support: 200 # 条件成立サンプル数の下限
require_recent_ok_days: 7 # 直近◯日間で劣化なし
deny_if_degradation: true # 劣化フラグがあれば攻め禁止
deny_size_up_if_degradation: true # 劣化中のサイズUPは絶対禁止

# -----------------------------
# 禁止ライン（安全装置）
# -----------------------------
deny_offense_if_dd_pct_gte:
  0.0 # DDがこの値以上なら攻め禁止
  # 0.0 の場合は未使用（後で設定）

# -----------------------------
# 監査・説明責任
# -----------------------------
require_audit_log: true # 監査ログ無しの実行は禁止

# -----------------------------
# 内部用（表示・監査）
# ※手動編集不要。ロード時に計算してもOK
# -----------------------------
policy_version: "1.0"
