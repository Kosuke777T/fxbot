#########################################################
#目的

threshold（best_thr=0.45）が
「一時的な最適値」か「戦略の性格として安定した値」かを判断するための
時間方向の安定性評価基盤を構築する

実装・確認で確定したこと（観測ベース）

weekly_retrain.py

Walk-Forward Optimization 維持

min_pips=0.6 固定（変更なし）

threshold最適化ロジック変更なし

安定性評価の観測系を完成

run_id 横断集約
→ thr_runs_summary.csv

固定(0.45) vs 毎回最適化 比較
→ thr_compare_fixed_vs_opt.csv

min_trades=200 / 500 / 1000 の安定性評価
→ thr_min_trades_eval.csv

CSVはすべて実生成・存在確認済み

ログに [THR_STABILITY] summary / comparison / min_trades eval saved を確認

dry-run では生成されない仕様も観測で確定

現時点の実データ結果（run_id=2点）

best_thr は すべて 0.45

固定(0.45) vs 最適化 → 差分なし（total_diff=0）

min_trades を 200 / 500 / 1000 に振っても best_thr 不変

fold内では揺れがあるが、全体集約では 0.45 が支配的

→ この相場断面では 0.45 は非常に安定

現時点の結論（作業仮説）

threshold=0.45 は
「一時的な偶然」より「戦略の性格」に近い可能性が高い

ただし run 数が少なく、時間方向の多様性がまだ不足

「壊れるかどうか」は今後の run 蓄積でのみ判定可能

禁止事項の遵守状況

fold別threshold運用：❌未実施

勝率最大化ルールへの変更：❌未実施

thresholdを特徴量に追加：❌未実施

ロジック条件追加：❌未実施

→ 全ルール遵守

#########################################################
